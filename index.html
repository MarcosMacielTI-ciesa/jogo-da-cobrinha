<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Jogo da Cobrinha üêç</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div id="nameModal" class="modal">
      <div class="modal-content">
        <h2>Bem-vindo ao Jogo da Cobrinha! üêç</h2>
        <p>Digite seu nome ou apelido:</p>
        <input type="text" id="playerName" placeholder="Seu nome..." maxlength="20">
        <button id="confirmNameBtn" type="button" class="btn btn-start" onclick="confirmPlayerName()">Come√ßar</button>
      </div>
    </div>

    <!-- Modal de sele√ß√£o de controle (aparece ap√≥s inserir nome em mobile) -->
    <div id="controlModal" class="modal hidden">
      <div class="modal-content">
        <h2>Escolha o tipo de controle</h2>
        <p>Escolha como deseja controlar a cobra no celular:</p>
        <div class="control-options">
          <div class="control-card">
            <div class="ctrl-name">Controle 1<br><small>Direcional cruzado</small></div>
            <img src="img/contole_direcional_cruzado.png" alt="Preview Direcional cruzado" class="ctrl-preview">
            <button class="btn choose-control-btn" data-control="type1">Escolher</button>
            <img class="ctrl-status" src="img/toggle_off.png" alt="Status: n√£o conectado" aria-hidden="true">
          </div>

          <div class="control-card">
            <div class="ctrl-name">Controle 2<br><small>Setas empilhadas</small></div>
            <img src="img/controle_setas_empilhadas.png" alt="Preview Setas empilhadas" class="ctrl-preview">
            <button class="btn choose-control-btn" data-control="type2">Escolher</button>
            <img class="ctrl-status" src="img/toggle_off.png" alt="Status: n√£o conectado" aria-hidden="true">
          </div>

          <div class="control-card">
            <div class="ctrl-name">Controle 3<br><small>Arrastar (swipe)</small></div>
            <img src="img/controle_arrastar.png" alt="Preview Arrastar" class="ctrl-preview">
            <button class="btn choose-control-btn" data-control="swipe">Escolher</button>
            <img class="ctrl-status" src="img/toggle_off.png" alt="Status: n√£o conectado" aria-hidden="true">
          </div>
        </div>
        <p class="hint">Voc√™ pode alterar a escolha depois nas configura√ß√µes</p>
      </div>
    </div>

    <header>
      <h1>üêç JOGO DA COBRINHA üêç</h1>
      <button id="settingsBtn" class="btn btn-settings" aria-label="Configura√ß√µes">‚öôÔ∏è</button>
      <div class="player-info">
        <span id="playerDisplay">Jogador: -</span>
      </div>
      <div class="info-bar">
        <div class="score-box">
          <span class="label">Pontos:</span>
          <span id="score">0</span>
        </div>
        <div class="level-box">
          <span class="label">N√≠vel:</span>
          <span id="level">1</span>
        </div>
        <div class="best-score-box">
          <span class="label">Melhor:</span>
          <span id="bestScore">0</span>
        </div>
      </div>
    </header>

    <main>
      <div class="game-wrapper">
        <canvas id="game"></canvas>
      </div>

      <div class="mobile-controls">
        <!-- Layout tipo 2 (padr√£o atual, setas empilhadas) -->
        <div id="controlsType2" class="mobile-controls-inner">
          <div class="mobile-controls-left">
            <div class="mobile-pad">
              <button id="upBtn" class="arrow-btn up">‚ñ≥</button>
              <button id="downBtn" class="arrow-btn down">‚ñΩ</button>
            </div>
          </div>

          <div class="mobile-controls-right">
            <div class="horizontal-controls">
              <button id="leftBtn" class="arrow-btn left">‚óÑ</button>
              <button id="rightBtn" class="arrow-btn right">‚ñ∫</button>
            </div>
          </div>
        </div>

        <!-- Layout tipo 1 (cruzado) - escondido por padr√£o -->
        <div id="controlsType1" class="mobile-controls-inner hidden controls-type1">
          <div class="cross-row left-cell">
            <button id="leftBtn1" class="arrow-btn left">‚óÑ</button>
          </div>
          <div class="cross-column center-cell">
            <button id="upBtn1" class="arrow-btn up">‚ñ≥</button>
            <button id="downBtn1" class="arrow-btn down">‚ñΩ</button>
          </div>
          <div class="cross-row right-cell">
            <button id="rightBtn1" class="arrow-btn right">‚ñ∫</button>
          </div>
        </div>

        <!-- Overlay para captura de swipe (controle por arrastar) -->
        <div id="swipeOverlay" class="swipe-overlay hidden" aria-hidden="true"></div>
      </div>

      <div class="controls">
        <button id="startBtn" class="btn btn-start">‚ñ∂ Iniciar</button>
        <button id="pauseBtn" class="btn btn-pause" disabled>‚è∏ Pausar</button>
        <button id="restartBtn" class="btn btn-restart">üîÑ Reiniciar</button>
      </div>

      <div class="instructions">
        <h3>üìã Como Jogar</h3>
        <ul>
          <li>Use as setas do teclado ou os bot√µes para controlar</li>
          <li>Coma a comida vermelha para crescer</li>
          <li>N√£o bata nas paredes ou em voc√™ mesmo</li>
          <li>O jogo fica mais r√°pido a cada 5 pontos</li>
        </ul>
      </div>

      <div class="difficulty-select">
        <h3>‚öôÔ∏è Dificuldade</h3>
        <div class="diff-buttons">
          <button id="easyBtn" class="diff-btn" data-diff="easy">F√°cil</button>
          <button id="mediumBtn" class="diff-btn active" data-diff="medium">M√©dio</button>
          <button id="hardBtn" class="diff-btn" data-diff="hard">Dif√≠cil</button>
        </div>
      </div>

      <!-- Modal de configura√ß√µes (controle + som) -->
      <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
          <h2>Configura√ß√µes</h2>
          <div class="settings-section">
            <h4>Tipo de controle</h4>
            <div class="control-options-row">
              <label><input type="radio" name="ctrlType" value="type1"> Direcional cruzado<br><img src="img/contole_direcional_cruzado.png" alt="mini preview" class="ctrl-preview-small"></label>
              <label><input type="radio" name="ctrlType" value="type2"> Setas empilhadas<br><img src="img/controle_setas_empilhadas.png" alt="mini preview" class="ctrl-preview-small"></label>
              <label><input type="radio" name="ctrlType" value="swipe"> Arrastar (swipe)<br><img src="img/controle_arrastar.png" alt="mini preview" class="ctrl-preview-small"></label>
            </div>
          </div>

          <div class="settings-section">
            <h4>Som</h4>
            <label><input type="checkbox" id="soundToggle"> Ativar sons</label>
            <div class="volume-row">
              <label for="soundVolume" class="visually-hidden">Volume</label>
              <input id="soundVolume" type="range" min="0" max="1" step="0.05" aria-label="Volume" title="Volume">
            </div>
          </div>

          <div class="settings-modal-actions">
            <button id="saveSettingsBtn" class="btn btn-start">Salvar</button>
            <button id="closeSettingsBtn" class="btn">Fechar</button>
          </div>
        </div>
      </div>

      <div class="leaderboards">
        <div class="leaderboard lb-easy">
          <h3>üèÜ F√°cil</h3>
          <table id="leaderboard_easy">
            <thead>
              <tr><th>Posi√ß√£o</th><th>Nome</th><th>Pontos</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="leaderboard lb-medium">
          <h3>üèÜ M√©dio</h3>
          <table id="leaderboard_medium">
            <thead>
              <tr><th>Posi√ß√£o</th><th>Nome</th><th>Pontos</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="leaderboard lb-hard">
          <h3>üèÜ Dif√≠cil</h3>
          <table id="leaderboard_hard">
            <thead>
              <tr><th>Posi√ß√£o</th><th>Nome</th><th>Pontos</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </main>

    <footer>
      <p>Desenvolvido com ‚ù§Ô∏è | Divirta-se!</p>
    </footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
